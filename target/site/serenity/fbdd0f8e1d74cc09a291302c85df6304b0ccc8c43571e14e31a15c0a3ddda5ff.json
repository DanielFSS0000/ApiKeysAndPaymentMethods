{"name":"Fail to create a PCOL transaction when payment identity is not configured","id":"create-transaction-with-puntos-colombia-(pcol)-in-wompi;fail-to-create-a-pcol-transaction-when-payment-identity-is-not-configured","testSteps":[{"number":1,"description":"When the user creates a PCOL transaction in Wompi with APPROVED_ONLY_POINTS status","duration":1439,"startTime":"2025-08-07T13:40:50.813310300-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":2,"description":"GET https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":0,"startTime":"2025-08-07T13:40:51.305174200-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","content":"","contentType":"null","requestHeaders":"Accept\u003d*/*","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nDate: Thu, 07 Aug 2025 18:40:49 GMT\r\napigw-requestid: O8rv1iXnIAMEbxw\u003d\r\nvary: Origin\r\nvary: accept-encoding\r\ncontent-encoding: gzip\r\nX-Cache: Miss from cloudfront\r\nVia: 1.1 9abd3232e1a3776dc26ad56d2477147c.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: bHe4q-pArSsLS7FajzYJ3uzSq5Kvtm-UA-k4IMByo_XYEMcD6IAepA\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"data\": {\n        \"id\": 5113,\n        \"name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"email\": \"pruebasensandbox@yopmail.com\",\n        \"contact_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"phone_number\": \"+573000000000\",\n        \"active\": true,\n        \"logo_url\": null,\n        \"legal_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"legal_id_type\": \"CC\",\n        \"legal_id\": \"1069879849\",\n        \"public_key\": \"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\n        \"accepted_currencies\": [\n            \"COP\"\n        ],\n        \"fraud_javascript_key\": null,\n        \"fraud_groups\": [\n            \n        ],\n        \"accepted_payment_methods\": [\n            \"NEQUI\",\n            \"PSE\",\n            \"BANCOLOMBIA_TRANSFER\",\n            \"CARD\",\n            \"BANCOLOMBIA_COLLECT\",\n            \"BANCOLOMBIA_QR\",\n            \"DAVIPLATA\",\n            \"BANCOLOMBIA_BNPL\",\n            \"SU_PLUS\"\n        ],\n        \"payment_methods\": [\n            {\n                \"name\": \"BANCOLOMBIA_BNPL\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_BNPL_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_COLLECT\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_COLLECT_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_QR\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_QR_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_TRANSFER\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_TRANSFER_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"CARD\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"CARD_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"DAVIPLATA\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"DAVIPLATA_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"NEQUI\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"NEQUI_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"PSE\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"PSE_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"SU_PLUS\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"SU_PLUS_SANDBOX\"\n                    }\n                ]\n            }\n        ],\n        \"presigned_acceptance\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTQ1OTIwNDktMjE3MDIiLCJlbWFpbCI6IiIsImV4cCI6MTc1NDU5NTY0OX0.SEUnJsCvkm6YspvcBW3IZHmyuMv02XE3LmWLwX_IcVc\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf\",\n            \"type\": \"END_USER_POLICY\"\n        },\n        \"presigned_personal_data_auth\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDQxLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLWFkbWluaXN0cmFjaW9uLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiMDI1YjQ1NzRjYTYwNjNlNGVlZDJmZmRhZGFjY2Q0MmIiLCJqaXQiOiIxNzU0NTkyMDQ5LTYwMTYwIiwiZW1haWwiOiIifQ.kJvNdwuIH8w04zk-FG1e3vzdm4ae4fvMIsYbcYWx8Zw\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/autorizacion-administracion-datos-personales.pdf\",\n            \"type\": \"PERSONAL_DATA_AUTH\"\n        },\n        \"click_to_pay_dpa_id\": null,\n        \"mcc\": null,\n        \"acquirer_id\": null\n    },\n    \"meta\": {\n        \n    }\n}","statusCode":200},"precondition":false,"level":1},{"number":3,"description":"Alejandro post pcol payment method","duration":911,"startTime":"2025-08-07T13:40:51.336715400-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":4,"description":"Alejandro post request","duration":895,"startTime":"2025-08-07T13:40:51.348681300-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":2,"children":[{"number":5,"description":"Alejandro executes a POST on the resource transactions","duration":872,"startTime":"2025-08-07T13:40:51.368475-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":3,"children":[{"number":6,"description":"POST https://api-sandbox.co.uat.wompi.dev/v1/transactions","duration":0,"startTime":"2025-08-07T13:40:52.240615300-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://api-sandbox.co.uat.wompi.dev/v1/transactions","content":"{\n    \"amount_in_cents\": 1000000,\n    \"currency\": \"COP\",\n    \"customer_email\": \"pruebasensandbox@yopmail.com\",\n    \"payment_method\": {\n        \"type\": \"PCOL\",\n        \"sandbox_status\": \"APPROVED_ONLY_POINTS\"\n    },\n    \"reference\": \"pedido-nequi-302233\",\n    \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTQ1OTIwNDktMjE3MDIiLCJlbWFpbCI6IiIsImV4cCI6MTc1NDU5NTY0OX0.SEUnJsCvkm6YspvcBW3IZHmyuMv02XE3LmWLwX_IcVc\",\n    \"signature\": \"6e7cc867cea8eb104d52a4d7cd67756626deb44e6aff1b7739cff86aee5732ad\"\n}","contentType":"application/json","requestHeaders":"Authorization\u003dBearer prv_stagtest_5i0ZGIGiFcDQifYsXxvsny7Y37tKqFWg\r\n\t\t\t\tAccept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nContent-Length: 117\r\nConnection: keep-alive\r\nDate: Thu, 07 Aug 2025 18:40:50 GMT\r\nvary: Origin\r\napigw-requestid: O8rv7h8-oAMEZKg\u003d\r\nX-Cache: Error from cloudfront\r\nVia: 1.1 5dd2304368effbad5413134075a82ff0.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: i_BXc1HXGYbOQRaHwj9t69isFeEgETSiw5NbiosrXYKTLZ5N3uyXJg\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"error\": {\n        \"type\": \"NOT_FOUND_ERROR\",\n        \"reason\": \"No hay una identidad de pago para PCOL configurada para este comercio\"\n    }\n}","statusCode":404},"precondition":false,"level":4}]}]}]}]},{"number":7,"description":"Then the response error type should be \"NOT_FOUND_ERROR\"","duration":12,"startTime":"2025-08-07T13:40:52.253167200-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0},{"number":8,"description":"And the error reason should be \"No hay una identidad de pago para PCOL configurada para este comercio\"","duration":18,"startTime":"2025-08-07T13:40:52.266828800-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0}],"userStory":{"id":"create-transaction-with-puntos-colombia-(pcol)-in-wompi","storyName":"Create transaction with Puntos Colombia (PCOL) in Wompi","displayName":"Create transaction with Puntos Colombia (PCOL) in Wompi","path":"postWompi/PostNegativePaymentMethod.feature","type":"feature"},"featureTag":{"name":"Post wompi/Create transaction with Puntos Colombia (PCOL) in Wompi","type":"feature","displayName":"Post wompi/Create transaction with Puntos Colombia (PCOL) in Wompi"},"title":"Fail to create a PCOL transaction when payment identity is not configured","description":"","tags":[{"name":"Post wompi","type":"capability","displayName":"Post wompi"},{"name":"Negative","type":"tag","displayName":"Negative"},{"name":"Post wompi/Create transaction with Puntos Colombia (PCOL) in Wompi","type":"feature","displayName":"Create transaction with Puntos Colombia (PCOL) in Wompi"}],"startTime":"2025-08-07T13:40:50.799767400-05:00[America/Bogota]","duration":1498,"projectKey":"","isManualTestingUpToDate":false,"manual":false,"testSource":"Cucumber","actors":[{"name":"Alejandro","can":["browse the web","call an API at https://api-sandbox.co.uat.wompi.dev/v1/"]}],"result":"SUCCESS"}